<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><title>AL&#x27;s blog</title><style data-href="/styles.53f3a8e74c184f005bfd.css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.indexStyles-module--cardStyles--3U9HW{display:flex;flex-direction:column;justify-content:left}.headerStyles-module--navLink--b0Npd{color:#fff;display:inline-block;font-family:Helvetica,Verdana,sans-serif;font-size:17px;font-weight:100;margin-left:15px;margin-right:15px;text-decoration:none}.headerStyles-module--navLink--b0Npd:hover{cursor:pointer}.headerStyles-module--mobileNavLink--3QKVx{color:#fff;font-family:Helvetica,Verdana,sans-serif;font-size:17px;font-weight:100;margin:25px 0;text-decoration:none}.headerStyles-module--navLinks--1e-eo{list-style:none}.headerStyles-module--nav--3kbAQ{float:left}.headerStyles-module--buttonsContainer--2KLLg{max-width:38rem;width:100%}.headerStyles-module--title--1eNkk{color:#fff;font-family:Helvetica,Verdana,sans-serif;font-size:20px;font-weight:500;float:left;height:40px;margin:15px;text-decoration:none}.headerStyles-module--title--1eNkk:hover{cursor:pointer;opacity:.7}.headerStyles-module--themeSwitch--33H1Z{float:right;height:40px;margin:10px}.headerStyles-module--mobileMenuItems--2chnY{margin-top:60px;list-style:none}.headerStyles-module--mobileMenuContainer--2v6Z6{background-color:#000!important;color:#fff!important}.headerStyles-module--mobileMenuButton--1U1Xf{margin:12px 0 10px 8px}.headerStyles-module--headerContainer--3WrSF{display:flex;height:55px;left:0;position:fixed;top:0;width:100%;z-index:100}.headerStyles-module--headerContainerNonMobile--1dBnb{justify-content:center}.centerContentStyles-module--modalBackdrop--zadc-{background:rgba(0,0,0,.57);position:fixed;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none;will-change:opacity;-webkit-transition:opacity .333s cubic-bezier(0,0,.21,1);transition:opacity .333s cubic-bezier(0,0,.21,1)}.centerContentStyles-module--backdropVisible--1N8zn{opacity:1;pointer-events:auto}.centerContentStyles-module--modalContent--2lows{background:#fff;border-radius:2px;box-shadow:0 0 14px rgba(0,0,0,.24),0 14px 28px rgba(0,0,0,.48);font-family:Helvetica,Verdana,sans-serif;overflow-y:auto;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%) translateY(30px);transform:translate(-50%,-50%) translateY(30px);-webkit-transition:-webkit-transform .333s cubic-bezier(0,0,.21,1) .05s;transition:-webkit-transform .333s cubic-bezier(0,0,.21,1) .05s;transition:transform .333s cubic-bezier(0,0,.21,1) .05s;transition:transform .333s cubic-bezier(0,0,.21,1) .05s,-webkit-transform .333s cubic-bezier(0,0,.21,1) .05s;padding:16px;min-height:200px;width:90%}.centerContentStyles-module--modalContent--2lows.centerContentStyles-module--small--3JBnz{max-height:50%;max-width:400px}.centerContentStyles-module--modalContent--2lows.centerContentStyles-module--medium--1OVsR{max-height:70%;max-width:700px}.centerContentStyles-module--modalContent--2lows.centerContentStyles-module--large--N8XMm{max-height:80%;max-width:1000px}.slideOutContentStyles-module--ModalContainer--1A0Iq{bottom:0;left:0;position:fixed;right:0;top:0;visibility:hidden;z-index:500}.slideOutContentStyles-module--ModalOpen--eycXh{visibility:visible}.slideOutContentStyles-module--ModalCloseArea--1kZF7{background-color:rgba(6,6,8,.6);bottom:0;position:absolute;left:0;right:0;top:0}.slideOutContentStyles-module--ModalContent--3Rm5r{background-color:#fff;border-right:1px solid #282d33;border-left:1px solid #282d33;color:#000;height:100vh;max-width:90%;overflow:auto;position:absolute;top:0;-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:all .6s cubic-bezier(.255,.445,.495,1.005);transition:all .6s cubic-bezier(.255,.445,.495,1.005);width:200px;z-index:700}.slideOutContentStyles-module--modalLeft--2aPTQ{-webkit-transform:translateX(-100%);transform:translateX(-100%);left:0}.slideOutContentStyles-module--modalRight--3Wp9q{-webkit-transform:translateX(100%);transform:translateX(100%);right:0}.slideOutContentStyles-module--ModalContentOpen--30z23{-webkit-transform:translateX(0);transform:translateX(0)}.cancelModalButtonStyles-module--cancelButton--3caKn{float:right;margin:10px}.cancelModalButtonStyles-module--cancelButton--3caKn:hover{cursor:pointer;opacity:.3}.switchStyles-module--iconStyle--u8zJx{align-items:center;color:#fff;display:flex;font-family:Helvetica,Verdana,sans-serif;font-size:15;height:100%;justify-content:center}.darkThemeStyles-module--headerColor--r4rx8{background-color:#282d33}.darkThemeStyles-module--backgroundColor--2n-YJ{background-color:#000}.darkThemeStyles-module--cardStyles--36D2i{background-color:#282d33;color:#fff}.darkThemeStyles-module--cardStyles--36D2i h2{color:#fff}.lightThemeStyles-module--headerColor--30jfX{background:#248ec4}.lightThemeStyles-module--backgroundColor--36-jH{background-color:#dae0e7}.lightThemeStyles-module--cardStyles--2L9qM{background-color:#fff;color:#000}.lightThemeStyles-module--cardStyles--2L9qM h2{color:#248ec4}.pageStyles-module--contentContainer--1z7Bs{width:100%;height:100%;min-height:100vh;display:flex;flex-direction:row;justify-content:center}.pageStyles-module--mainContent--2_Ihi{margin-top:55px;padding:6px;max-width:38rem;width:100%;display:flex;flex-direction:column;align-items:center}.cardStyles-module--card--10a1J{padding:.5rem 2rem;margin:6px 0;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);font-family:Helvetica,Verdana,sans-serif;display:flex;max-width:38rem}.cardStyles-module--card--10a1J>a{text-decoration:none}.cardStyles-module--cardDesktop--1x6V5{width:100%}.cardStyles-module--cardMobile--xv7zN{width:80%}.tagButtonStyles-module--tagButton--DtpfK{font-family:inherit;font-size:10px;text-decoration:none;color:inherit;border:1px solid;padding:2px 3px;border-radius:4px;opacity:.8}.tagButtonStyles-module--tagButton--DtpfK:hover{opacity:.3}</style><meta name="generator" content="Gatsby 2.13.46"/><link as="script" rel="preload" href="/webpack-runtime-f9d142e1df62a5ec6acc.js"/><link as="script" rel="preload" href="/app-403139f3d325c7686900.js"/><link as="script" rel="preload" href="/styles-99aa20e474cb5264a752.js"/><link as="script" rel="preload" href="/1-f188e87b103bc7322bfa.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-8fc58ee14e2529dcbc04.js"/><link as="fetch" rel="preload" href="/page-data/setup-home-server/page-data.json" crossorigin="use-credentials"/></head><body style="margin:0;padding:0"><script>
(function() {
  const LOCALSTORAGE_KEY = "currentThemeColor"
  window.__initialColor = window.localStorage.getItem(LOCALSTORAGE_KEY) || "light"
})()
  </script><noscript id="gatsby-noscript">I use javascript a lot as a programmer. I&#x27;m not sure what you&#x27;d expect to see here without javascript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="display:none"><div><header class="headerStyles-module--headerContainer--3WrSF headerStyles-module--headerContainerNonMobile--1dBnb darkThemeStyles-module--headerColor--r4rx8"><div class="headerStyles-module--buttonsContainer--2KLLg"><a class="headerStyles-module--title--1eNkk" href="/">Aarron Lee</a><nav class="headerStyles-module--nav--3kbAQ"><ul class="headerStyles-module--navLink--b0Npd"><li class="headerStyles-module--navLink--b0Npd"><a class="headerStyles-module--navLink--b0Npd" href="/">Blog</a></li><li class="headerStyles-module--navLink--b0Npd"><a class="headerStyles-module--navLink--b0Npd" href="/about/">About</a></li></ul></nav></div><div class="headerStyles-module--themeSwitch--33H1Z" style="position:relative;display:inline-block;text-align:left;opacity:1;border-radius:14px;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s;touch-action:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"><div class="react-switch-bg" style="height:28px;width:56px;margin:0;position:relative;background:#000000;border-radius:14px;cursor:pointer;-webkit-transition:background 0.25s;-moz-transition:background 0.25s;transition:background 0.25s"><div style="height:28px;width:30px;position:relative;opacity:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="switchStyles-module--iconStyle--u8zJx">L</div></div><div style="height:28px;width:30px;position:absolute;opacity:1;right:0;top:0;pointer-events:none;-webkit-transition:opacity 0.25s;-moz-transition:opacity 0.25s;transition:opacity 0.25s"><div class="switchStyles-module--iconStyle--u8zJx">D</div></div></div><div class="react-switch-handle" style="height:26px;width:26px;background:#ffffff;display:inline-block;cursor:pointer;border-radius:50%;position:absolute;transform:translateX(1px);top:1px;outline:0;border:0;-webkit-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;-moz-transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s;transition:background-color 0.25s, transform 0.25s, box-shadow 0.15s"></div><input type="checkbox" role="switch" style="border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px"/></div></header><div class="darkThemeStyles-module--backgroundColor--2n-YJ pageStyles-module--contentContainer--1z7Bs"><main class="pageStyles-module--mainContent--2_Ihi"><div class="cardStyles-module--card--10a1J cardStyles-module--cardDesktop--1x6V5 darkThemeStyles-module--cardStyles--36D2i "><div class="blog-post-container" style="width:100%"><div class="blog-post"><h1>Setting up a home server from scratch</h1><h5>May 27, 2020<!-- --> - Time To Read: <!-- -->7<!-- --> <!-- -->mins</h5><div style="font-size:13px"><strong>tags:</strong> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/nginx">nginx</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/nas">nas</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/ddclient">ddclient</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/namecheap">namecheap</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/dns">dns</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/certbot">certbot</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/letsencrypt">letsencrypt</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/docker">docker</a> <a class="tagButtonStyles-module--tagButton--DtpfK" href="/tags/docker-compose">docker-compose</a> </div><div class="blog-post-content"><p>While I already had a decent understanding of how the internet works, I rarely had practical ways to apply that knowledge. Sure, I knew the terms "DNS", "Name Servers", "Firewalls", etc, and generally knew how they all worked together, but I had never end-to-end configured a bare metal server to host a website. In retrospect, configuring a server from scratch proved to be a great learning experience.</p>
<h2>Context:</h2>
<p>I had an old $50 HP 8300 SFF desktop computer, an old but plenty-capable machine with it's i5 intel processor and 8GB of RAM. I was already using it to host a Plex Media server, Calibre-Web server, and a few other web services on this machine. It had been chugging along for many months now, and has been great to work with.</p>
<p>However, my past self had unfortunately set it up with desktop Ubuntu without SSH, which led to requiring the GUI for to administer this machine. Not being able to do remote administration was a constant friction point, especially since the device was in the far corner of my living room.</p>
<h2>Goals:</h2>
<p>So the goals I laid out were the following:</p>
<ol>
<li>Install Ubuntu Server LTS (at the time of this post, 20.04 LTS is the latest version)</li>
<li>Setup SSH for remote administration</li>
<li>Setup Nginx, a firewall, and port forwarding for to enable hosting a site</li>
<li>Enable Dynamic DNS so that I could map a domain name to my server</li>
<li>Setup HTTPS with a Let's Encrypt certificate + autorenewal</li>
<li>Host some static HTML via nginx and have a fully functional site up and running</li>
</ol>
<h2>Equipment:</h2>
<ul>
<li>Computer to use as a Server (an old desktop, laptop, etc)</li>
<li>Internet Router where you can setup Port Forwarding</li>
<li>Domain name via a registrar (I used Namecheap)</li>
<li>USB/DVD/etc - for to setup OS install media. Use whatever is appropriate for your machine</li>
<li>(optional, but recommended) Personal use computer for remote administration of the server (this personal computer must be able to SSH into remote machines)</li>
</ul>
<h2>Steps</h2>
<p>Part 1: Setup your server</p>
<ol>
<li>Download and setup a Ubuntu Server USB installer</li>
<li>Boot your server, and boot the installer via USB</li>
<li>Install Ubuntu server, setup your login info, etc</li>
<li>Once setup, you should be able to login to the device on boot</li>
</ol>
<p>Part 2: Setup SSH keys / Disable SSH Password login</p>
<ol>
<li>Create an SSH Key on the machine you'll be using for remote administration</li>
<li>Copy the public key file of your generated SSH key (by default, it's at <code class="language-text">~/.ssh/id_rsa.pub</code> on your machine). You will need to transfer a copy of this file to your server, how you choose to do so is up to you.</li>
<li>Take the contents of the public key file, and appended it to the end of the <code class="language-text">/home/username_here/.ssh/authorized_keys</code> file on the Server</li>
<li>To test and make sure this worked, attempt to SSH into your server. To do so, first, figure out the server's address on your local LAN (it should look something like <code class="language-text">192.168.XX.XX</code>)</li>
<li>after figuring out your server's address on your local LAN, on your remote administration machine attempt the following:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ssh username_goes_here@server_LAN_address_here
e.g.
ssh aarron@192.168.XX.XX</code></pre></div>
<p>Since you setup SSH keys, it should auto-log you in.</p>
<ol start="6">
<li>Once your SSH keys are setup, time to disable SSH password login. Edit your <code class="language-text">/etc/ssh/sshd_config</code> file on your server, and find + change to the following:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">ChallengeResponseAuthentication no
PasswordAuthentication no
UsePAM no
PermitRootLogin no</code></pre></div>
<p>After saving your changes, run <code class="language-text">sudo service sshd restart</code> and <code class="language-text">sudo service ssh restart</code></p>
<ol start="7">
<li>To verify the changes, attempt <code class="language-text">ssh root@LAN_address_here</code>. It should fail</li>
</ol>
<p>Part 3: Setup NGINX, firewall, and port forwarding</p>
<ol>
<li>Install nginx with <code class="language-text">sudo apt install nginx</code></li>
<li>Start nginx with <code class="language-text">sudo service nginx start</code></li>
<li>To make sure it's working, go to <code class="language-text">http://192.168.XX.XX:80</code> in your browser, it should display the nginx default page. If you'd like to change the static HTML pages being served by nginx, you can change your files located at <code class="language-text">/var/www/html</code>. If you want to host a web app, you'll need to edit your <code class="language-text">nginx.conf</code> file accordingly</li>
<li>Once we confirmed that it's working, we now need to setup a firewall (we'll use a simple firewall, <code class="language-text">ufw</code>. feel free to use whatever you're comfortable with)</li>
<li>run <code class="language-text">sudo ufw enable</code>.</li>
<li>enable SSH by running <code class="language-text">sudo ufw allow ssh</code></li>
<li>Check to see if the firewall is still working. If you revisit <code class="language-text">http://192.168.XX.XX:80</code>, your firewall should now be blocking the standard HTTP port</li>
<li>to reenable HTTP, run <code class="language-text">sudo ufw allow http</code></li>
<li>Revisit the url and make sure the webpage now renders</li>
<li>Now that your server is properly serving HTTP requests on the expected port, we now need to port forward from your network gateway (e.g. your home router, etc) to your server. Look up how to port forward on your router, and forward port 80 to the server</li>
<li>To verify that this worked, first figure out your public IP (you can visit <a href="https://domains.google.com/checkip">https://domains.google.com/checkip</a>) in a browser. Then, in your browser, type in your public IP address, it should display the nginx default page.</li>
</ol>
<p>Part 4: Setup Domain Name</p>
<ol>
<li>Purchase a domain name of your choice from your preferred provider. I went with namecheap</li>
<li>Setup a Dynamic DNS record according to your provider. Depending on your provider, there are different ways to do so. I'll be detailing how to handle namecheap, specifically, in the following instructions</li>
<li>Go to the <code class="language-text">Advanced DNS</code> and enable Dynamic DNS. Copy down this password some place secure, you'll need this later.</li>
<li>On <code class="language-text">Advanced DNS</code> page, create 2 dynamic DNS entries:</li>
<li>Host: @, value: 127.0.0.1 (we'll change this later), TTL: Automatic</li>
<li>Host: www, value: 127.0.0.1 (same, we'll change later), TTL: Automatic</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2a5618ff3bcb0c3dc237a44944019599/798d4/dns.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABkElEQVQoz41Sy07DQAzMD1CiSrRJNo/dJG1IUkCVKvUDkBAHRNsTKhLQC5V6QP3/k/G4uyE8DhyceL32eMZrT8UxJWl6siwjk+c0rSqK+Qy/bltKOa6Nocu6JsP/ZrGg++0zPby+0Gy5pDhJJAcYHg4ZJyGg2C8mE2raRpKKsmT/BIgm7ayliv/NfE63qxXdbTY0Y/BIKQFDvQcWV9c3VE6nFEaRgAMMcbCCAsSDMKRxEIjBvxiNxODj3pmXaS2ywCbg5D4IOsNcspz7fu+uA9TaUN00lBeFAKGBcom2OwrB5D8mDCEPjwCWmdH8OGk3EzyU5ns0i/6wn3EPH8PsMLcxujAj4wDAjM/+cEihldhJZYvtZjgVIhksdG4EFAbGmCMS8EAfxyO97/dfYI4N+6hFDf7KbounLG0whMzYJuM1AX44HOhtt5N5di/a81HjGKbYQyWScyonpZ2hESmQhNk9bbf0uF5/m5mb24kh5p9IjTAcMZOKl7kqC9IcjOzOud07Gwzo3Pd/rYez/h7C/wTGFi3D7UGyaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Advanced DNS setup"
        title="Advanced DNS setup"
        src="/static/2a5618ff3bcb0c3dc237a44944019599/5a190/dns.png"
        srcset="/static/2a5618ff3bcb0c3dc237a44944019599/772e8/dns.png 200w,
/static/2a5618ff3bcb0c3dc237a44944019599/e17e5/dns.png 400w,
/static/2a5618ff3bcb0c3dc237a44944019599/5a190/dns.png 800w,
/static/2a5618ff3bcb0c3dc237a44944019599/798d4/dns.png 976w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<ol start="5">
<li>We're going to setup dynamic DNS with <a href="https://github.com/ddclient/ddclient">ddclient</a> in a Docker container. To do so, first install the docker daemon + other utils, including docker-compose (you can look up this part)</li>
<li>Once you have docker installed, we're going to use the following <code class="language-text">docker-compose.yml</code> file:</li>
</ol>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.7'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">ddclient</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> linuxserver/ddclient
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ddclient
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> PUID=1000
      <span class="token punctuation">-</span> PGID=1000
      <span class="token punctuation">-</span> TZ=America/New_York
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token comment"># NOTE: make sure to replace the filepath with a place</span>
      <span class="token comment"># where you want to store the ddclient config files</span>
      <span class="token punctuation">-</span> /filepath_on_server_machine<span class="token punctuation">:</span>/config
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped</code></pre></div>
<ol start="7">
<li>once your <code class="language-text">docker-compose.yml</code> file is setup, run <code class="language-text">sudo docker-compose up -d</code>, which should spin up a ddclient container.</li>
<li>confirm that there is now a <code class="language-text">ddclient.conf</code> file inside the filepath you specified on the server. Once you confirm that the file is there, run <code class="language-text">sudo docker-compose down</code> to stop the contianer.</li>
<li>Find the <code class="language-text">namecheap</code> entry in the <code class="language-text">ddclient.conf</code> file, and edit it to as follows:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">use=web, web=https://dynamicdns.park-your-domain.com/getip
protocol=namecheap
server=dynamicdns.park-your-domain.com
login=your_url_goes_here
password=advanced_dns_password_here
@, www</code></pre></div>
<ol start="10">
<li>Save you changes, run <code class="language-text">sudo docker-compose up -d</code> again. Run <code class="language-text">sudo docker logs ddclient</code>, you should see a message similar to this:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">SUCCESS:  updating @: good: IP address set to your_public_ip_address
SUCCESS:  updating www: good: IP address set to your_public_ip_address</code></pre></div>
<p>Your Namecheap DNS entries should have also been updated to the new IP address. You should now be able to visit your url (no HTTPS yet)</p>
<p>Part 5: setup SSL certificate for HTTPS</p>
<ol>
<li>Now that HTTP is working properly, we can now setup HTTPS.</li>
<li>This part is fairly straightforward with <a href="https://certbot.eff.org/">certbot</a>, which is what we'll be using here.</li>
<li>Before running certbot, edit your <code class="language-text">server_name</code> in the <code class="language-text">/etc/nginx/sites-available/default</code> file, as seen below:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> # change server_name to have a list of your urls
 server_name your_root_url_without_www your_url_with_www
 e.g.
 server_name test.com www.test.com</code></pre></div>
<p>Restart your nginx service after saving this change with <code class="language-text">sudo service nginx restart</code></p>
<ol start="4">
<li>after your server_name is updated, install certbot via the instructions at the official certbot site.</li>
<li>after installation, run <code class="language-text">sudo certbox --nginx</code>, and follow the prompts</li>
<li>run <code class="language-text">sudo ufw allow https</code>, and setup port forwarding on your router for port 443</li>
<li>You should now have a valid SSL cert for your website, go revisit your website (but use <code class="language-text">https</code> instead), and it should just work!</li>
<li>(optional) you can enable HTTP2 by editing the following lines in your <code class="language-text">nginx.conf</code> to include <code class="language-text">http2</code>:</li>
</ol>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">  listen [::]:443 http2 ssl ipv6only=on; # managed by Certbot
  listen 443 http2 ssl; # managed by Certbot</code></pre></div>
<ol start="9">
<li>if you setup HTTP2, don't forget to restart the nginx service!</li>
</ol>
<p>And with that, you should be fully hosting a website on your own server in your living room!</p></div></div><div style="display:flex;flex-direction:row;justify-content:space-between;width:100%;margin:25px 0px"><div style="opacity:0.3">← No More Posts</div><a style="color:inherit" href="/kubernetes-concepts-cheat-sheet">A Basic Cheat Sheet for Kubernetes terminology<!-- --> →</a></div></div></div></main></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/setup-home-server";window.webpackCompilationHash="7ed23802280122841cb8";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-403139f3d325c7686900.js"],"component---src-about-index-js":["/component---src-about-index-js-d83442df967689876989.js"],"component---src-templates-all-tags-index-js":["/component---src-templates-all-tags-index-js-9816c74996804e321f0e.js"],"component---src-templates-single-tag-index-js":["/component---src-templates-single-tag-index-js-349d2095020ca02e62f2.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-8fc58ee14e2529dcbc04.js"],"component---src-pages-index-js":["/component---src-pages-index-js-605b3babff88f99a133a.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-8fc58ee14e2529dcbc04.js" async=""></script><script src="/1-f188e87b103bc7322bfa.js" async=""></script><script src="/styles-99aa20e474cb5264a752.js" async=""></script><script src="/app-403139f3d325c7686900.js" async=""></script><script src="/webpack-runtime-f9d142e1df62a5ec6acc.js" async=""></script></body></html>